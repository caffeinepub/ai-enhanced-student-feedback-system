{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Add more features and fully enable instructor panel",
  "requirements": [
    {
      "id": "REQ-24",
      "summary": "Gate the Instructor Panel page behind a simple login form with Instructor ID and PIN verification",
      "acceptanceCriteria": [
        "Instructor Panel shows a login form before any data is displayed",
        "Correct credentials unlock the full panel; incorrect credentials show an error message",
        "A Logout button is visible once logged in and returns the user to the login screen",
        "Auth state is held in component state (not persisted across page refresh)"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/InstructorPanel.tsx",
          "operation": "modify",
          "description": "Add component state to track authentication (isAuthenticated, authenticatedInstructorId). Wrap the existing panel content in a conditional render that shows a login form card when not authenticated. The login form should collect Instructor ID and PIN, call the verifyInstructor backend capability via a hook, and on success set isAuthenticated to true. Include a Logout button in the authenticated view that clears the auth state. Style the login card with au-red/au-navy brand palette consistent with existing components."
        }
      ]
    },
    {
      "id": "REQ-25",
      "summary": "Enhance the Instructor Panel with a System Analytics section displaying platform-wide statistics",
      "acceptanceCriteria": [
        "Four stat cards displayed: Total Students, Total Submissions, Average Score, Top Student",
        "Values update when the panel is loaded or refreshed",
        "Stat cards use the au-red/au-navy palette and animate in with the existing entrance animation pattern"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/InstructorPanel.tsx",
          "operation": "modify",
          "description": "Add a System Analytics section to the authenticated instructor panel view. Fetch platform statistics using the useGetSystemStats hook. Render four stat cards showing totalStudents, totalSubmissions, overallAverageScore, and topStudent (name and average). Style cards with the same au-red/au-navy palette and apply the existing IntersectionObserver entrance animation pattern used in the Home page stats strip. Display loading skeletons while fetching."
        }
      ]
    },
    {
      "id": "REQ-26",
      "summary": "Add an Instructor Notes feature to the Instructor Panel for annotating student submissions",
      "acceptanceCriteria": [
        "Each submission detail view in the Instructor Panel includes a notes text area",
        "Saving a note calls the backend and shows a success toast",
        "Existing notes are loaded and displayed when the submission is expanded",
        "Empty note state shows a placeholder prompt to the instructor"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/InstructorPanel.tsx",
          "operation": "modify",
          "description": "Extend the student detail view's submission rendering to include an instructor notes section for each submission. Add a textarea for note input with a Save button. On component mount or when a submission is expanded, call useGetSubmissionNote to load any existing note and pre-fill the textarea. On save, call useAddInstructorNote and display a success toast notification using the existing Toaster. Include a placeholder prompt when no note exists. Style consistently with the existing SubmissionCard component."
        }
      ]
    },
    {
      "id": "REQ-27",
      "summary": "Add a Manage Instructors sub-section inside the Instructor Panel for adding and deleting instructor accounts",
      "acceptanceCriteria": [
        "A 'Manage Instructors' tab or section is accessible within the Instructor Panel when authenticated",
        "Form to add a new instructor with name, department, ID, and PIN fields",
        "Table lists existing instructors with a Delete action button per row",
        "Adding or deleting an instructor refreshes the list"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/InstructorTable.tsx",
          "operation": "create",
          "description": "Create a new table component that displays all instructors fetched via useGetAllInstructors. Follow the structure and styling of StudentTable.tsx, rendering instructorId, name, email, and department in columns. Add a Delete button per row that calls useDeleteInstructor and invalidates the instructors query. Use au-red/au-navy palette and hover styles consistent with StudentTable."
        },
        {
          "path": "frontend/src/components/AddInstructorForm.tsx",
          "operation": "create",
          "description": "Create a form component for adding new instructors with fields for name, email, department, and PIN. Follow the structure and validation patterns of AddStudentForm.tsx. On submit, call useAddInstructor hook, show loading state, and display inline success/error feedback. Style with the existing au-red button and form input styles."
        },
        {
          "path": "frontend/src/pages/InstructorPanel.tsx",
          "operation": "modify",
          "description": "Add a 'Manage Instructors' section to the authenticated instructor panel view. This section should include the AddInstructorForm component and the InstructorTable component. Organize it as a separate card or tab below the main student management area. Ensure the section is only visible when the instructor is logged in."
        }
      ]
    },
    {
      "id": "REQ-28",
      "summary": "Add React Query hooks for the new backend capabilities related to instructors, notes, and system stats",
      "acceptanceCriteria": [
        "Each new hook mirrors the naming and structure conventions of existing hooks",
        "Mutation hooks invalidate relevant queries on success",
        "useGetSystemStats is a query hook; mutation hooks use useMutation"
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add seven new React Query hooks following the existing patterns in this file: useVerifyInstructor (mutation returning boolean), useGetSystemStats (query returning SystemStats), useAddInstructorNote (mutation accepting submissionId and note, invalidates submission queries), useGetSubmissionNote (query accepting submissionId, returns string), useGetAllInstructors (query returning Array<Instructor>), useAddInstructor (mutation accepting name, email, department, pin, invalidates instructors query on success), and useDeleteInstructor (mutation accepting instructorId, invalidates instructors query on success). Ensure mutation hooks use toast notifications and proper error handling consistent with existing hooks."
        }
      ]
    },
    {
      "id": "REQ-29",
      "summary": "Add a Score Distribution chart to the Instructor Panel using a simple CSS/Tailwind bar chart",
      "acceptanceCriteria": [
        "Five score-range buckets are displayed as proportional horizontal or vertical bars",
        "Bars are styled in au-red (#C8102E) with white labels",
        "Chart updates when the panel data refreshes",
        "Gracefully shows an empty state if no submissions exist"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/ScoreDistributionChart.tsx",
          "operation": "create",
          "description": "Create a pure CSS/Tailwind bar chart component that displays submission score distribution across five buckets (0–20, 21–40, 41–60, 61–80, 81–100). Accept an array of all submissions as a prop, compute the count per bucket, and render proportional horizontal or vertical bars styled with au-red (#C8102E) background and white text labels. Use flexbox or grid layout for bar positioning. Include an empty state message when no submissions exist. Follow the existing animation patterns with IntersectionObserver entrance effects."
        },
        {
          "path": "frontend/src/pages/InstructorPanel.tsx",
          "operation": "modify",
          "description": "Add the ScoreDistributionChart component to the System Analytics section. Pass all student submissions (derived from iterating over students and their submission data) to the chart component. Position it below the stat cards in a visually distinct card container with consistent spacing and au-red/au-navy theming."
        }
      ]
    }
  ]
}